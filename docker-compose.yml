services:
  dblp-service:
    build:
      context: ./DblpService
      dockerfile: Dockerfile
    container_name: coauthors-dblp-service
    ports:
      - "${DBLP_PORT:-8091}:8091"
    environment:
      DATA_DIR: "/data"
      CORS_ORIGINS: "${CORS_ORIGINS:-http://localhost:8090}"
    volumes:
      - dblp_data:/data
    restart: unless-stopped

  coauthors-frontend:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: coauthors-frontend
    ports:
      - "${WEB_PORT:-8090}:8090"
    environment:
      API_BASE_URL: "${API_BASE_URL:-http://localhost:8091}"
      COAUTHORS_DATA_DIR: "/runtime"
    volumes:
      - coauthors_runtime:/runtime
    depends_on:
      - dblp-service
    restart: unless-stopped

volumes:
  dblp_data:
  coauthors_runtime:
