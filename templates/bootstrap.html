<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="page_title_bootstrap">CoAuthors Bootstrap Console</title>
    <link rel="stylesheet" href="/static/query_styles.css" />
    <link rel="stylesheet" href="/static/bootstrap_styles.css" />
  </head>
  <body data-style="hotcrp" data-page="bootstrap">
    <div class="bg-layer" aria-hidden="true"></div>

    <main class="container">
      <header class="hero">
        <div>
          <h1 data-i18n="bootstrap_title">CoAuthors Bootstrap Console</h1>
          <p data-i18n="bootstrap_subtitle">Download XML/DTD, decompress XML, and build DBLP SQLite through the web.</p>
        </div>

        <div class="top-controls">
          <div class="style-control">
            <label for="style-select" data-i18n="control_style">Style</label>
            <select id="style-select">
              <option value="hotcrp">HotCRP Classic</option>
              <option value="journal">Journal Serif</option>
              <option value="nordic">Nordic Light</option>
              <option value="campus">Campus Modern</option>
              <option value="folio">Folio Minimal</option>
              <option value="slate">Slate Pro</option>
            </select>
          </div>

          <div class="style-control">
            <label for="language-select" data-i18n="control_language">Language</label>
            <select id="language-select">
              <option value="en" data-i18n="lang_en">English</option>
              <option value="zh" data-i18n="lang_zh">Chinese</option>
            </select>
          </div>
        </div>
      </header>

      <section class="card">
        <h2 data-i18n="bootstrap_params_title">Task Parameters</h2>
        <form id="start-form" class="grid-form">
          <label>
            <span data-i18n="bootstrap_mode">Build Mode</span>
            <select id="mode" disabled>
              <option value="fullmeta" selected>fullmeta</option>
            </select>
          </label>

          <label>
            <span data-i18n="bootstrap_xml_url">XML.GZ URL</span>
            <input id="xml-gz-url" type="url" value="{{ default_xml_gz_url }}" required />
          </label>

          <label>
            <span data-i18n="bootstrap_dtd_url">DTD URL</span>
            <input id="dtd-url" type="url" value="{{ default_dtd_url }}" required />
          </label>

          <label>
            <span data-i18n="bootstrap_batch">Batch Size</span>
            <input id="batch-size" type="number" min="100" value="{{ default_batch_size }}" />
          </label>

          <label>
            <span data-i18n="bootstrap_progress_every">Progress Every</span>
            <input
              id="progress-every"
              type="number"
              min="1000"
              value="{{ default_progress_every }}"
            />
          </label>

          <label class="checkbox-line">
            <input id="rebuild" type="checkbox" checked />
            <span data-i18n="bootstrap_rebuild">Rebuild database (remove existing sqlite/wal/shm)</span>
          </label>

          <div class="btn-row">
            <button type="submit" id="start-btn" data-i18n="bootstrap_start">Start</button>
            <button type="button" id="stop-btn" class="warn" data-i18n="bootstrap_stop">Stop</button>
            <button type="button" id="reset-btn" class="ghost" data-i18n="bootstrap_reset">Reset</button>
          </div>
        </form>
      </section>

      <section class="status-grid">
        <article class="card">
          <h2 data-i18n="bootstrap_runtime">Runtime Status</h2>
          <div class="kv"><span data-i18n="runtime_status">Status</span><strong id="status">idle</strong></div>
          <div class="kv"><span data-i18n="runtime_step">Step</span><strong id="step">idle</strong></div>
          <div class="kv"><span data-i18n="runtime_mode">Mode</span><strong id="mode-val">{{ default_mode }}</strong></div>
          <div class="kv"><span data-i18n="runtime_message">Message</span><strong id="message">-</strong></div>
          <div class="kv"><span data-i18n="runtime_started">Started</span><strong id="started-at">-</strong></div>
          <div class="kv"><span data-i18n="runtime_finished">Finished</span><strong id="finished-at">-</strong></div>
        </article>

        <article class="card">
          <h2 data-i18n="bootstrap_progress">Progress</h2>
          <div class="kv"><span data-i18n="progress_downloaded">Downloaded</span><strong id="downloaded-bytes">-</strong></div>
          <div class="kv"><span data-i18n="progress_total">Total</span><strong id="total-bytes">-</strong></div>
          <div class="kv"><span data-i18n="progress_xml_written">XML Written</span><strong id="written-bytes">-</strong></div>
          <div class="kv"><span data-i18n="progress_records">Processed Records</span><strong id="processed-records">-</strong></div>
          <div class="kv"><span data-i18n="progress_rate">Rate</span><strong id="records-rate">-</strong></div>
          <div class="kv"><span data-i18n="progress_data_dir">Data Dir</span><code id="data-dir">{{ data_dir }}</code></div>
        </article>
      </section>

      <section class="card">
        <h2 data-i18n="bootstrap_output_files">Output Files</h2>
        <table>
          <thead>
            <tr>
              <th data-i18n="table_file">File</th>
              <th data-i18n="table_exists">Exists</th>
              <th data-i18n="table_size">Size</th>
              <th data-i18n="table_path">Path</th>
            </tr>
          </thead>
          <tbody id="file-table"></tbody>
        </table>
      </section>

      <section class="card">
        <h2 data-i18n="bootstrap_logs">Live Logs</h2>
        <pre id="logs"></pre>
      </section>

      <footer class="card footer-card">
        <h2 data-i18n="footer_title">Project Information</h2>
        <div class="meta-grid">
          <div class="meta-row">
            <span data-i18n="footer_dev_label">Developer</span>
            <strong data-i18n="footer_dev_value">Nankai University AOSP Laboratory</strong>
          </div>
          <div class="meta-row">
            <span data-i18n="footer_maintainer_label">Maintainer</span>
            <strong data-i18n="footer_maintainer_value">Nankai University AOSP Laboratory</strong>
          </div>
          <div class="meta-row">
            <span data-i18n="footer_version_label">Version</span>
            <strong>v{{ app_version }}</strong>
          </div>
          <div class="meta-row">
            <span data-i18n="footer_features_label">Current Features</span>
            <strong data-i18n="footer_features_value">Coauthor matrix, pair publications, metadata output, bootstrap build pipeline.</strong>
          </div>
          <div class="meta-row">
            <span data-i18n="footer_license_label">License</span>
            <strong>MIT</strong>
          </div>
          <div class="meta-row">
            <span data-i18n="footer_visits_label">Visits</span>
            <strong>{{ visit_count }}</strong>
          </div>
          <div class="meta-row">
            <span data-i18n="footer_copyright_label">Copyright</span>
            <strong data-i18n="footer_copyright_value"
              >© 2026 AOSP Lab of Nankai University. All Rights Reserved.</strong
            >
          </div>
        </div>
      </footer>
    </main>

    <script src="/static/bootstrap_app.js"></script>
  </body>
</html>
